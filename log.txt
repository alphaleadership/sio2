=== Test v2 des Corrections de Duplication de Chemin - Compression ===

1. Test de correction de duplication de chemin simple (Unix)...
Pattern duplication detected and removed: users/test
Path corrected: /home/labo/temp/partage/users/test/users/test -> \home\labo\temp\partage\users\test
   Original: /home/labo/temp/partage/users/test/users/test
   Corrigé:  \home\labo\temp\partage\users\test
   ✓ Test réussi - duplication consécutive supprimée

2. Test de correction de pattern de duplication complexe...
Pattern duplication detected and removed: users/john
Path corrected: /home/labo/temp/partage/users/john/documents/users/john/files -> \home\labo\temp\partage\users\john\documents\files
   Original: /home/labo/temp/partage/users/john/documents/users/john/files
   Corrigé:  \home\labo\temp\partage\users\john\documents\files
   ✓ Test réussi - pattern de duplication supprimé

3. Test avec chemin sans duplication...
Path corrected: /home/labo/temp/partage/users/alice/documents -> \home\labo\temp\partage\users\alice\documents
   Original: /home/labo/temp/partage/users/alice/documents
   Corrigé:  \home\labo\temp\partage\users\alice\documents
   ❌ Test échoué - chemin propre modifié

4. Test avec chemin de base...
   Original: /home/labo/temp/partage
   Corrigé:  /home/labo/temp/partage
   ✓ Test réussi - chemin de base inchangé

5. Test avec chemins Windows...
Pattern duplication detected and removed: users/test
Path corrected: C:\partage\users\test\users\test\documents -> C:\partage\users\test\documents
   Original: C:\partage\users\test\users\test\documents
   Corrigé:  C:\partage\users\test\documents
   ✓ Test réussi - chemin Windows corrigé

6. Test de suppression de patterns de duplication...
Pattern duplication detected and removed: users/test
   Segments originaux: [users, test, users, test, documents]
   Segments nettoyés:  [users, test, documents]
   ✓ Test réussi - pattern de duplication supprimé

7. Test avec segments sans duplication...
   Segments originaux: [users, alice, documents, files]
   Segments nettoyés:  [users, alice, documents, files]
   ✓ Test réussi - segments propres inchangés

8. Test avec triple duplication...
Pattern duplication detected and removed: users/test
Pattern duplication detected and removed: users/test
Path corrected: /home/labo/temp/partage/users/test/users/test/users/test -> \home\labo\temp\partage\users\test
   Original: /home/labo/temp/partage/users/test/users/test/users/test
   Corrigé:  \home\labo\temp\partage\users\test
   ✓ Test réussi - triple duplication supprimée

9. Test avec chemin invalide...
   Original: /other/path/users/test
   Corrigé:  /other/path/users/test
   ✓ Test réussi - chemin invalide inchangé

🎉 Tests v2 terminés !

Corrections appliquées au système de compression:
  ✓ Détection et correction des duplications de chemin dans destFolder
  ✓ Suppression des duplications consécutives (ex: /users/test/users/test)
  ✓ Suppression des patterns de duplication complexes
  ✓ Support des chemins Windows et Unix
  ✓ Préservation des chemins propres sans modification
  ✓ Gestion d'erreurs robuste avec fallback
  ✓ Validation des chemins de base
